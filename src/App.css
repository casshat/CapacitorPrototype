/* ============================================
   FitTrack - Design System (Updated)
   ============================================ */

/* ========== DESIGN TOKENS ========== */
:root {
  /* Colors - Backgrounds */
  --color-bg-primary: #FDF9F8;
  --color-bg-surface: #FFFFFF;
  --color-bg-accent: #FAF2EF;
  --color-bg-input: #FAF8F7;
  
  /* Colors - Borders */
  --color-border-default: #F0E8E4;
  --color-border-input: #E5DDD8;
  
  /* Colors - Text (Updated for better contrast) */
  --color-text-primary: #2D2420;
  --color-text-secondary: #6B5D54;
  --color-text-tertiary: #9A8E86;
  
  /* Colors - Progress */
  --color-progress-track: #F5EDEA;
  --color-progress-fill: #CBA090;
  --color-gradient-start: #C9988A;
  --color-gradient-end: #DBBEB4;
  
  /* Colors - Accent */
  --color-accent: #C9907E;
  --color-accent-soft: #FAE8E2;
  
  /* Colors - Buttons */
  --color-button-primary: #3D352F;
  --color-button-text: #FFFFFF;
  
  /* Colors - Feedback */
  --color-success: #6B8F64;
  
  /* Colors - Cycle Badge */
  --color-cycle-bg: #FAE8E2;
  --color-cycle-text: #B07E6C;
  
  /* Typography - Font Family */
  --font-family: "DM Sans", -apple-system, BlinkMacSystemFont, sans-serif;
  
  /* Typography - Font Sizes */
  --font-size-display: 52px;
  --font-size-headline: 44px;
  --font-size-title: 28px;
  --font-size-large: 20px;
  --font-size-date: 18px;
  --font-size-body: 16px;
  --font-size-label: 15px;
  --font-size-small: 13px;
  --font-size-caption: 12px;
  --font-size-tiny: 11px;
  
  /* Typography - Font Weights (Updated - heavier) */
  --font-weight-regular: 500;
  --font-weight-medium: 600;
  --font-weight-semibold: 700;
  --font-weight-bold: 700;
  
  /* Typography - Line Heights */
  --line-height-tight: 1;
  --line-height-normal: 1.4;
  
  /* Spacing */
  --space-unit: 8px;
  --section-padding-x: 24px;
  --section-padding-y: 20px;
  --section-header-margin: 20px;
  --input-group-margin: 28px;
  --label-margin: 14px;
  --macro-row-gap: 18px;
  --label-gap: 8px;
  --ring-label-gap: 10px;
  
  /* Progress Dimensions */
  --bar-height-large: 14px;
  --bar-height-default: 12px;
  --ring-size: 130px;
  --ring-stroke: 12px;
  
  /* Borders */
  --border-radius: 0px;
  --border-radius-small: 8px;
  --border-radius-badge: 24px;
  --border-width: 1px;
  --border-width-input: 2px;
  
  /* Component Sizes - Inputs */
  --input-padding: 16px;
  --input-font-size: 20px;
  --input-min-width: 100px;
  
  /* Component Sizes - Buttons */
  --button-padding: 16px 28px;
  --button-padding-small: 12px 20px;
  --button-font-size: 16px;
  --button-font-size-small: 14px;
  
  /* Rating buttons */
  --rating-button-padding: 16px 0;
  --rating-button-font-size: 18px;
  
  /* Tab Bar */
  --tab-bar-height: 70px;
  --tab-icon-size: 26px;
  --tab-label-size: 12px;
  
  /* Transitions */
  --transition-fast: 0.2s ease;
  --transition-default: 0.3s ease;
  --transition-slow: 0.5s ease;
}

/* ========== THEME: SOFT BLUSH (Default) ========== */
/* Default theme colors are defined in :root above */

/* ========== THEME: SAGE GREEN ========== */
:root[data-theme="sageGreen"] {
  /* Backgrounds */
  --color-bg-primary: #F7F9F7;
  --color-bg-surface: #FFFFFF;
  --color-bg-accent: #EFF3EE;
  --color-bg-input: #F5F7F4;
  
  /* Borders */
  --color-border-default: #E3E8E1;
  --color-border-input: #D5DDD3;
  
  /* Text */
  --color-text-primary: #2A2F2A;
  --color-text-secondary: #5A6259;
  --color-text-tertiary: #8B9389;
  
  /* Progress */
  --color-progress-track: #E8EEDF;
  --color-progress-fill: #8FA88C;
  --color-gradient-start: #8FA88C;
  --color-gradient-end: #B5C9B3;
  
  /* Accent */
  --color-accent: #7D9B7A;
  --color-accent-soft: #E5EDE3;
  
  /* Buttons */
  --color-button-primary: #3A4339;
  
  /* Semantic */
  --color-success: #6B8F64;
  --color-cycle-bg: #E5EDE3;
  --color-cycle-text: #6F8E6C;
}

/* ========== THEME: LIGHT GRAY ========== */
:root[data-theme="lightGray"] {
  /* Backgrounds */
  --color-bg-primary: #F8F8F8;
  --color-bg-surface: #FFFFFF;
  --color-bg-accent: #F0F0F0;
  --color-bg-input: #F5F5F5;
  
  /* Borders */
  --color-border-default: #E5E5E5;
  --color-border-input: #D9D9D9;
  
  /* Text */
  --color-text-primary: #1A1A1A;
  --color-text-secondary: #666666;
  --color-text-tertiary: #999999;
  
  /* Progress */
  --color-progress-track: #EBEBEB;
  --color-progress-fill: #8C8C8C;
  --color-gradient-start: #8C8C8C;
  --color-gradient-end: #B3B3B3;
  
  /* Accent */
  --color-accent: #737373;
  --color-accent-soft: #E8E8E8;
  
  /* Buttons */
  --color-button-primary: #333333;
  
  /* Semantic */
  --color-success: #5C8C5C;
  --color-cycle-bg: #E8E8E8;
  --color-cycle-text: #737373;
}

/* ========== THEME: DARK ========== */
:root[data-theme="dark"] {
  /* Backgrounds */
  --color-bg-primary: #1A1A1A;
  --color-bg-surface: #242424;
  --color-bg-accent: #2E2E2E;
  --color-bg-input: #2A2A2A;
  
  /* Borders */
  --color-border-default: #3A3A3A;
  --color-border-input: #444444;
  
  /* Text */
  --color-text-primary: #F5F5F5;
  --color-text-secondary: #B8B8B8;
  --color-text-tertiary: #808080;
  
  /* Progress */
  --color-progress-track: #3A3A3A;
  --color-progress-fill: #8C8C8C;
  --color-gradient-start: #8C8C8C;
  --color-gradient-end: #B3B3B3;
  
  /* Accent */
  --color-accent: #A89E96;
  --color-accent-soft: #3A3A3A;
  
  /* Buttons */
  --color-button-primary: #E5E5E5;
  --color-button-text: #1A1A1A;
  
  /* Semantic */
  --color-success: #A89E96;
  --color-cycle-bg: #3A3A3A;
  --color-cycle-text: #A89E96;
}

/* ========== RESET & BASE ========== */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: var(--font-family);
  font-weight: var(--font-weight-regular);
  background: var(--color-bg-primary);
  color: var(--color-text-primary);
  line-height: var(--line-height-normal);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ========== APP CONTAINER ========== */
.app {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  max-width: 430px;
  margin: 0 auto;
  background: var(--color-bg-primary);
}

/* ========== MAIN CONTENT ========== */
.main {
  flex: 1;
  display: flex;
  flex-direction: column;
  /* Account for tab bar height + safe area + extra breathing room */
  padding-bottom: calc(var(--tab-bar-height) + env(safe-area-inset-bottom, 0px) + 8px);
  overflow-y: auto;
}

/* ========== SECTIONS ========== */
.section {
  padding: var(--section-padding-y) var(--section-padding-x);
  border-bottom: var(--border-width) solid var(--color-border-default);
  display: flex;
  flex-direction: column;
  justify-content: center;
  min-height: 48px; /* ~10px taller than button (~38px) */
}

.section:last-of-type {
  border-bottom: none;
}

.section-header {
  font-size: var(--font-size-caption);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: var(--section-header-margin);
}

/* ========== DASHBOARD HEADER ========== */
.dashboard-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--section-padding-y) var(--section-padding-x);
  padding-top: calc(env(safe-area-inset-top, 0px) + var(--section-padding-y));
  border-bottom: var(--border-width) solid var(--color-border-default);
}

.dashboard-date {
  font-size: var(--font-size-date);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
}

/* ========== CYCLE BADGE ========== */
.cycle-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: var(--color-cycle-bg);
  color: var(--color-cycle-text);
  border-radius: var(--border-radius-badge);
  font-size: var(--font-size-small);
  font-weight: var(--font-weight-medium);
}

.cycle-badge svg {
  width: 14px;
  height: 14px;
  fill: currentColor;
}

/* ========== CALORIE CARD ========== */
.calorie-card {
  padding: var(--section-padding-y) var(--section-padding-x);
  border-bottom: var(--border-width) solid var(--color-border-default);
}

.calorie-content {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  margin-bottom: var(--label-gap);
}

.calorie-consumed {
  font-size: var(--font-size-headline);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
  line-height: var(--line-height-tight);
}

.calorie-meta {
  display: flex;
  align-items: baseline;
  gap: 12px;
}

.calorie-goal {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-regular);
  color: var(--color-text-tertiary);
}

.calorie-remaining {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  color: var(--color-accent);
}

/* ========== MACRO CARD ========== */
.macro-card {
  padding: var(--section-padding-y) var(--section-padding-x);
  border-bottom: var(--border-width) solid var(--color-border-default);
}

.macro-rows {
  display: flex;
  flex-direction: column;
  gap: var(--macro-row-gap);
}

.macro-row {
  display: flex;
  flex-direction: column;
  gap: var(--label-gap);
}

.macro-row-header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
}

.macro-label {
  font-size: var(--font-size-label);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
}

.macro-value {
  font-size: var(--font-size-label);
  font-weight: var(--font-weight-regular);
  color: var(--color-text-tertiary);
}

/* ========== PROGRESS BAR ========== */
.progress-bar {
  width: 100%;
  height: var(--bar-height-default);
  background: var(--color-progress-track);
  border-radius: var(--border-radius);
  overflow: hidden;
}

.progress-bar--large {
  height: var(--bar-height-large);
}

.progress-bar__fill {
  height: 100%;
  background: var(--color-progress-fill);
  transition: width var(--transition-default);
}

.progress-bar__fill--gradient {
  background: linear-gradient(to right, var(--color-gradient-start), var(--color-gradient-end));
}

/* ========== STATS ROW (Steps + Sleep) ========== */
.stats-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  padding: var(--section-padding-y) var(--section-padding-x);
  border-bottom: var(--border-width) solid var(--color-border-default);
}

.stats-row > *:first-child {
  border-right: var(--border-width) solid var(--color-border-default);
  padding-right: var(--section-padding-x);
}

.stats-row > *:last-child {
  padding-left: var(--section-padding-x);
}

/* ========== STEPS CARD ========== */
.steps-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.steps-ring-container {
  position: relative;
  width: var(--ring-size);
  height: var(--ring-size);
  margin-bottom: var(--ring-label-gap);
}

.steps-ring-content {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

.steps-value {
  font-size: var(--font-size-title);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
  line-height: var(--line-height-tight);
}

.steps-unit {
  font-size: var(--font-size-tiny);
  font-weight: var(--font-weight-regular);
  color: var(--color-text-tertiary);
  margin-top: 2px;
}

.steps-goal {
  font-size: var(--font-size-tiny);
  font-weight: var(--font-weight-regular);
  color: var(--color-text-tertiary);
}

/* ========== SLEEP CARD ========== */
.sleep-card {
  display: flex;
  flex-direction: column;
}

.sleep-value-row {
  display: flex;
  align-items: baseline;
  gap: 4px;
  margin-bottom: 4px;
}

.sleep-value {
  font-size: var(--font-size-display);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
  line-height: var(--line-height-tight);
}

.sleep-goal {
  font-size: var(--font-size-large);
  font-weight: var(--font-weight-regular);
  color: var(--color-text-tertiary);
}

.sleep-subtext {
  font-size: var(--font-size-caption);
  font-weight: var(--font-weight-regular);
  color: var(--color-text-tertiary);
}

/* ========== PROGRESS RING ========== */
.progress-ring {
  transform: rotate(-90deg);
}

.progress-ring__track {
  fill: none;
  stroke: var(--color-progress-track);
}

.progress-ring__fill {
  fill: none;
  stroke: url(#ring-gradient);
  stroke-linecap: butt;
  transition: stroke-dashoffset var(--transition-default);
}

/* ========== TAB BAR ========== */
.tab-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  display: flex;
  justify-content: space-around;
  align-items: center;
  /* Height = content height + safe area for home indicator */
  height: calc(var(--tab-bar-height) + env(safe-area-inset-bottom, 0px));
  padding-bottom: env(safe-area-inset-bottom, 0px);
  background: var(--color-bg-surface);
  border-top: var(--border-width) solid var(--color-border-default);
  max-width: 430px;
  margin: 0 auto;
}

.tab-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 8px 24px;
  text-decoration: none;
  color: var(--color-text-tertiary);
  transition: color var(--transition-fast);
}

.tab-item.active {
  color: var(--color-text-primary);
}

.tab-icon {
  width: var(--tab-icon-size);
  height: var(--tab-icon-size);
}

.tab-icon svg {
  width: 100%;
  height: 100%;
  stroke-width: 2;
}

.tab-item.active .tab-icon svg {
  stroke-width: 2.5;
}

.tab-label {
  font-size: var(--tab-label-size);
  font-weight: var(--font-weight-regular);
}

.tab-item.active .tab-label {
  font-weight: var(--font-weight-semibold);
}

/* ========== STYLED INPUT ========== */
.styled-input {
  padding: var(--input-padding);
  font-size: var(--input-font-size);
  font-weight: var(--font-weight-bold);
  font-family: var(--font-family);
  color: var(--color-text-primary);
  background: var(--color-bg-input);
  border: var(--border-width-input) solid var(--color-border-input);
  border-radius: var(--border-radius-small);
  text-align: center;
  min-width: var(--input-min-width);
  transition: border-color var(--transition-fast);
}

.styled-input:focus {
  outline: none;
  border-color: var(--color-accent);
}

.styled-input::placeholder {
  color: var(--color-text-tertiary);
}

/* Remove number input spinners */
.styled-input::-webkit-outer-spin-button,
.styled-input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.styled-input[type=number] {
  -moz-appearance: textfield;
}

/* ========== PRIMARY BUTTON ========== */
.primary-button {
  padding: var(--button-padding);
  font-size: var(--button-font-size);
  font-weight: var(--font-weight-bold);
  font-family: var(--font-family);
  background: var(--color-button-primary);
  color: var(--color-button-text);
  border: none;
  border-radius: var(--border-radius-small);
  cursor: pointer;
  transition: opacity var(--transition-fast);
}

.primary-button:hover:not(:disabled) {
  opacity: 0.9;
}

.primary-button:disabled {
  background: var(--color-bg-accent);
  color: var(--color-text-tertiary);
  opacity: 0.6;
  cursor: not-allowed;
}

.primary-button--small {
  padding: var(--button-padding-small);
  font-size: var(--button-font-size-small);
}

/* ========== MACRO INPUT ROW ========== */
.macro-input-row {
  margin-bottom: var(--input-group-margin);
}

.macro-input-row:last-child {
  margin-bottom: 0;
}

.macro-input-header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  margin-bottom: var(--label-margin);
}

.macro-input-controls {
  display: flex;
  gap: 12px;
}

.macro-input-field {
  position: relative;
  flex: 1;
}

.macro-input-field input {
  width: 100%;
  padding-right: 32px;
}

.macro-input-suffix {
  position: absolute;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-tertiary);
  pointer-events: none;
}

/* ========== CALORIES SUMMARY CARD ========== */
.calories-summary {
  background: var(--color-bg-accent);
  border-radius: var(--border-radius-small);
  padding: var(--input-padding);
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: var(--section-header-margin);
}

.calories-summary-label {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
}

.calories-summary-value {
  font-size: var(--font-size-title);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
}

.calories-summary-goal {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-tertiary);
}

/* ========== BODY INPUT ROW ========== */
.body-input-row {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: var(--input-group-margin);
}

.body-input-row:last-child {
  margin-bottom: 0;
}

.body-input-label {
  flex: 1;
}

.body-input-label-main {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
}

.body-input-label-hint {
  font-size: var(--font-size-small);
  font-weight: var(--font-weight-regular);
  color: var(--color-text-tertiary);
}

.body-input-field {
  display: flex;
  align-items: center;
  gap: 8px;
}

.body-input-field input {
  width: 100px;
}

.body-input-unit {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-tertiary);
  min-width: 45px;
  text-align: left;
}

/* ========== CYCLE SECTION ========== */
.cycle-section-badge {
  margin-bottom: 8px;
}

.cycle-section-prediction {
  font-size: var(--font-size-small);
  font-weight: var(--font-weight-regular);
  color: var(--color-text-tertiary);
  margin-bottom: var(--section-header-margin);
}

.cycle-section-question {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  margin-bottom: var(--label-margin);
}

.cycle-empty-message {
  font-size: var(--font-size-small);
  color: var(--color-text-tertiary);
  text-align: center;
  padding: var(--section-padding-y) 0;
}

.cycle-toggle-buttons {
  display: flex;
  gap: 12px;
}

.cycle-toggle-button {
  flex: 1;
  padding: 14px;
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  font-family: var(--font-family);
  background: var(--color-bg-input);
  color: var(--color-text-secondary);
  border: var(--border-width-input) solid var(--color-border-input);
  border-radius: var(--border-radius-small);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.cycle-toggle-button:hover {
  border-color: var(--color-accent);
}

.cycle-toggle-button.active {
  background: var(--color-accent-soft);
  color: var(--color-accent);
  border-color: var(--color-accent);
}

/* ========== STEPS CARD (LOG VERSION) ========== */
.steps-card-log {
  background: var(--color-bg-accent);
  border-radius: var(--border-radius-small);
  padding: var(--section-padding-y);
}

.steps-card-log-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 4px;
}

.steps-card-log-label {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
}

.steps-card-log-sync {
  font-size: var(--font-size-small);
  font-weight: var(--font-weight-regular);
  color: var(--color-text-tertiary);
}

.steps-card-log-value {
  font-size: var(--font-size-title);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
}

.steps-card-log-goal {
  font-size: var(--font-size-small);
  font-weight: var(--font-weight-regular);
  color: var(--color-text-tertiary);
}

/* ========== RATING INPUT ========== */
.rating-input-row {
  margin-bottom: var(--input-group-margin);
}

.rating-input-row:last-child {
  margin-bottom: 0;
}

.rating-input-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--label-margin);
}

.rating-input-label {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
}

.rating-input-saved {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: var(--font-size-small);
  font-weight: var(--font-weight-medium);
  color: var(--color-success);
}

.rating-input-controls {
  display: flex;
  gap: 8px;
}

.rating-buttons {
  display: flex;
  gap: 4px;
  flex: 1;
}

.rating-button {
  flex: 1;
  padding: var(--rating-button-padding);
  font-size: var(--rating-button-font-size);
  font-weight: var(--font-weight-bold);
  font-family: var(--font-family);
  background: var(--color-bg-input);
  color: var(--color-text-secondary);
  border: var(--border-width-input) solid var(--color-border-input);
  border-radius: var(--border-radius-small);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.rating-button:hover {
  border-color: var(--color-accent);
}

.rating-button.selected {
  background: var(--color-accent-soft);
  color: var(--color-accent);
  border-color: var(--color-accent);
}

/* ========== EMPTY STATE ========== */
.empty-state {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px var(--section-padding-x);
  text-align: center;
}

.empty-state__title {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-regular);
  color: var(--color-text-secondary);
  margin-bottom: 16px;
}

.empty-state__button {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 12px 24px;
  background: var(--color-accent-soft);
  color: var(--color-accent);
  border: none;
  border-radius: var(--border-radius-small);
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  font-family: var(--font-family);
  cursor: pointer;
  transition: opacity var(--transition-fast);
}

.empty-state__button:hover {
  opacity: 0.8;
}

/* ========== LOADING SKELETON ========== */
.skeleton {
  background: linear-gradient(
    90deg,
    var(--color-progress-track) 25%,
    var(--color-bg-accent) 50%,
    var(--color-progress-track) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-pulse 1.5s ease-in-out infinite;
  border-radius: var(--border-radius-small);
}

@keyframes skeleton-pulse {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.skeleton--text {
  height: 1em;
  width: 60%;
}

.skeleton--number {
  height: 44px;
  width: 120px;
}

.skeleton--bar {
  height: var(--bar-height-default);
  width: 100%;
}

/* ========== RESPONSIVE ========== */
@media (min-width: 768px) {
  .app {
    margin: 0 auto;
  }
}

/* ========== SAFE AREA ========== */
/* Safe area handling is now done inline in the component styles above */

/* ========== AUTH PAGE ========== */
.auth-page {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--page-padding);
  background: var(--color-bg-primary);
}

.auth-container {
  width: 100%;
  max-width: 400px;
}

.auth-header {
  text-align: center;
  margin-bottom: 32px;
}

.auth-title {
  font: var(--font-display-large);
  color: var(--color-text-primary);
  margin-bottom: 8px;
}

.auth-subtitle {
  font: var(--font-body-large);
  color: var(--color-text-secondary);
}

.auth-form {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.auth-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.auth-label {
  font: var(--font-label-medium);
  color: var(--color-text-secondary);
}

.auth-error {
  background: #FEE8E8;
  color: #B91C1C;
  padding: 12px 16px;
  border-radius: var(--border-radius-small);
  font: var(--font-body-medium);
}

.auth-success {
  background: #E8F5E9;
  color: #2E7D32;
  padding: 12px 16px;
  border-radius: var(--border-radius-small);
  font: var(--font-body-medium);
}

.auth-toggle {
  text-align: center;
  margin-top: 24px;
  font: var(--font-body-medium);
  color: var(--color-text-secondary);
}

.auth-toggle-button {
  background: none;
  border: none;
  color: var(--color-accent);
  font: var(--font-label-medium);
  cursor: pointer;
  text-decoration: underline;
}

.auth-toggle-button:hover {
  color: var(--color-text-primary);
}

/* Logout button in header */
.header-logout {
  background: none;
  border: none;
  color: var(--color-text-tertiary);
  font: var(--font-caption);
  cursor: pointer;
  padding: 4px 8px;
}

.header-logout:hover {
  color: var(--color-text-primary);
}

.overview-signout {
  position: fixed;
  top: calc(env(safe-area-inset-top, 0px) + var(--section-padding-y));
  right: var(--section-padding-x);
  z-index: 100;
  opacity: 1;
  transition: opacity 0.3s ease;
}

.overview-signout.scrolled {
  opacity: 0;
  pointer-events: none;
}

/* ========== OVERVIEW PAGE ========== */
.overview-page {
  padding-bottom: 80px; /* Space for tab bar */
}

.overview-page-header {
  padding: var(--section-padding-y) var(--section-padding-x);
  padding-top: calc(env(safe-area-inset-top, 0px) + var(--section-padding-y));
  border-bottom: var(--border-width) solid var(--color-border-default);
}

.overview-page-title {
  font: var(--font-title-large);
  color: var(--color-text-primary);
  margin-bottom: 16px;
}

.overview-page-divider {
  height: 1px;
  background: var(--color-border-default);
  margin-bottom: 24px;
}

.overview-section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.overview-section-title {
  font: var(--font-title-medium);
  color: var(--color-text-primary);
}

/* ========== COLLAPSIBLE SECTION ========== */
.collapsible-section {
  margin-bottom: 0;
}

.collapsible-section-header {
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0;
  background: none;
  border: none;
  cursor: pointer;
  text-align: left;
}

.collapsible-section-title {
  font-size: var(--font-size-caption);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-family: var(--font-family);
}

.collapsible-section-icon {
  color: var(--color-text-tertiary);
  transition: transform 0.3s ease;
}

.collapsible-section-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
}

.collapsible-section-content.expanded {
  max-height: 2000px; /* Large enough for content */
}

/* ========== GOAL EDITOR ========== */
.goal-editor {
  margin-bottom: 28px;
}

.goal-editor-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.goal-editor-label {
  font: var(--font-label-medium);
  color: var(--color-text-secondary);
}

.goal-editor-saved {
  display: flex;
  align-items: center;
  gap: 4px;
  font: var(--font-caption);
  color: var(--color-success);
}

.goal-editor-controls {
  display: flex;
  align-items: center;
  gap: 12px;
}

.goal-editor-input-wrapper {
  display: flex;
  align-items: center;
  gap: 8px;
}

.goal-editor-input {
  width: 100px;
  padding: 12px;
  background: var(--color-bg-input);
  border: 1px solid var(--color-border-input);
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  text-align: center;
  color: var(--color-text-primary);
}

.goal-editor-unit {
  font: var(--font-body-medium);
  color: var(--color-text-tertiary);
}

/* ========== GOAL READ-ONLY (CALORIES) ========== */
.goal-readonly {
  margin-bottom: 28px;
}

.goal-readonly-header {
  margin-bottom: 8px;
}

.goal-readonly-label {
  font: var(--font-label-medium);
  color: var(--color-text-secondary);
}

.goal-readonly-value {
  font-size: 16px;
  font-weight: 600;
  color: var(--color-text-primary);
}

.goal-readonly-note {
  font: var(--font-caption);
  color: var(--color-text-tertiary);
  font-weight: 400;
}

/* ========== PROFILE FIELD ========== */
.profile-field {
  margin-bottom: 24px;
}

.profile-field-label {
  display: block;
  font: var(--font-label-medium);
  color: var(--color-text-secondary);
  margin-bottom: 8px;
}

.profile-field-controls {
  display: flex;
  align-items: center;
  gap: 12px;
}

.profile-field-input-wrapper {
  display: flex;
  align-items: center;
  gap: 8px;
}

.profile-field-input {
  width: 100px;
  padding: 12px;
  background: var(--color-bg-input);
  border: 1px solid var(--color-border-input);
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  text-align: center;
  color: var(--color-text-primary);
}

.profile-field-input-height {
  width: 80px;
}

.profile-field-height-inputs {
  display: flex;
  align-items: center;
  gap: 8px;
}

.profile-field-unit {
  font: var(--font-body-medium);
  color: var(--color-text-tertiary);
}

/* ========== CYCLE FIELD ========== */
.cycle-field {
  margin-bottom: 24px;
}

.cycle-field-label {
  display: block;
  font: var(--font-label-medium);
  color: var(--color-text-secondary);
  margin-bottom: 8px;
}

.cycle-field-controls {
  display: flex;
  align-items: center;
  gap: 12px;
}

.cycle-field-input-wrapper {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
}

.cycle-field-input {
  width: 100px;
  padding: 12px;
  background: var(--color-bg-input);
  border: 1px solid var(--color-border-input);
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  text-align: center;
  color: var(--color-text-primary);
}

.cycle-field-input-date {
  width: 100%;
  text-align: left;
}

.cycle-field-unit {
  font: var(--font-body-medium);
  color: var(--color-text-tertiary);
}

/* ========== CHART RANGE SELECTOR ========== */
.chart-range-selector {
  position: relative;
}

.chart-range-select {
  appearance: none;
  padding: 6px 32px 6px 12px;
  background: var(--color-bg-input);
  border: 1px solid var(--color-border-input);
  border-radius: 8px;
  font: var(--font-label-medium);
  color: var(--color-text-primary);
  cursor: pointer;
}

.chart-range-chevron {
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  pointer-events: none;
  color: var(--color-text-tertiary);
}

/* ========== WEIGHT CHART ========== */
.weight-chart {
  margin-top: 16px;
}

.weight-chart-empty {
  padding: 40px 20px;
  text-align: center;
  font: var(--font-body-medium);
  color: var(--color-text-secondary);
}

.weight-chart-skeleton {
  padding: 20px;
}

.weight-chart-tooltip {
  background: var(--color-bg-surface);
  border: 1px solid var(--color-border-default);
  border-radius: 8px;
  padding: 8px 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.weight-chart-tooltip-label {
  font: var(--font-caption);
  color: var(--color-text-tertiary);
  margin-bottom: 4px;
}

.weight-chart-tooltip-value {
  font: var(--font-label-medium);
  color: var(--color-text-primary);
}

/* ========== QUICK STAT CARD ========== */
.quick-stats-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin-top: 16px;
}

.quick-stat-card {
  background: var(--color-bg-accent);
  border-radius: 8px;
  padding: 20px;
}

.quick-stat-label {
  font: var(--font-label-medium);
  color: var(--color-text-secondary);
  margin-bottom: 12px;
}

.quick-stat-values {
  display: flex;
  align-items: baseline;
  gap: 4px;
  margin-bottom: 12px;
}

.quick-stat-average {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-text-primary);
}

.quick-stat-goal {
  font: var(--font-caption);
  color: var(--color-text-tertiary);
}

.quick-stat-empty {
  text-align: center;
  padding: 20px 0;
}

.quick-stat-empty-value {
  font-size: 24px;
  font-weight: 700;
  color: var(--color-text-tertiary);
  margin-bottom: 4px;
}

.quick-stat-empty-subtext {
  font: var(--font-caption);
  color: var(--color-text-tertiary);
}

.quick-stat-skeleton {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* ========== SECTION HEADER WITH TOGGLE ========== */
.section-header-with-toggle {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* ========== DASHBOARD CHECKBOX ========== */
.dashboard-checkbox {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: var(--font-size-small);
  color: var(--color-text-secondary);
  cursor: pointer;
  user-select: none;
}

.dashboard-checkbox input[type="checkbox"] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  background: var(--color-bg-input);
  border: 2px solid var(--color-border-input);
  border-radius: 4px;
  cursor: pointer;
  position: relative;
  transition: all var(--transition-fast);
}

.dashboard-checkbox input[type="checkbox"]:checked {
  background: var(--color-accent);
  border-color: var(--color-accent);
}

.dashboard-checkbox input[type="checkbox"]:checked::after {
  content: '';
  position: absolute;
  left: 5px;
  top: 2px;
  width: 4px;
  height: 8px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

.dashboard-checkbox input[type="checkbox"]:focus {
  outline: none;
  border-color: var(--color-accent);
}

.dashboard-checkbox span {
  font-weight: var(--font-weight-medium);
}

/* ========== APPLE HEALTH LINK SECTION ========== */
.health-link-section {
  background: var(--color-bg-accent);
  border-radius: var(--border-radius-small);
  padding: var(--section-padding-y);
}

.health-link-connected {
  text-align: center;
}

.health-link-status {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  color: var(--color-success);
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  margin-bottom: 4px;
}

.health-link-prompt {
  text-align: center;
}

.health-link-description {
  font-size: var(--font-size-small);
  color: var(--color-text-secondary);
  margin-bottom: 12px;
}

.health-link-button {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 12px 24px;
  background: var(--color-button-primary);
  color: var(--color-button-text);
  border: none;
  border-radius: var(--border-radius-small);
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  font-family: var(--font-family);
  cursor: pointer;
  transition: opacity var(--transition-fast);
}

.health-link-button:hover:not(:disabled) {
  opacity: 0.9;
}

.health-link-button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.health-link-error {
  margin-top: 12px;
  font-size: var(--font-size-small);
  color: #B91C1C;
}

/* ========== SETTINGS PAGE ========== */
.settings-page {
  min-height: 100vh;
  background: var(--color-bg-primary);
}

/* Main content without tab bar padding */
.main--no-tabbar {
  padding-bottom: env(safe-area-inset-bottom, 0px);
}

/* ========== SETTINGS HEADER ========== */
.settings-header {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: var(--section-padding-y) var(--section-padding-x);
  padding-top: calc(env(safe-area-inset-top, 0px) + var(--section-padding-y));
  border-bottom: var(--border-width) solid var(--color-border-default);
}

.settings-back-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: none;
  border: none;
  color: var(--color-text-primary);
  cursor: pointer;
  border-radius: 8px;
  margin-left: -8px;
  transition: background var(--transition-fast);
}

.settings-back-button:hover {
  background: var(--color-bg-accent);
}

.settings-title {
  font-size: var(--font-size-large);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
}

/* ========== SETTINGS SECTION HEADER ========== */
.settings-section-title {
  font-size: var(--font-size-caption);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 16px;
}

/* ========== THEME GRID ========== */
.theme-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

/* ========== THEME CARD ========== */
.theme-card {
  padding: 16px;
  background: var(--color-bg-surface);
  border: 2px solid var(--color-border-default);
  border-radius: 8px;
  cursor: pointer;
  transition: border-color var(--transition-fast);
}

.theme-card:hover {
  border-color: var(--color-accent);
}

.theme-card.selected {
  border-color: var(--color-accent);
}

.theme-card-swatches {
  display: flex;
  gap: 6px;
  margin-bottom: 12px;
}

.theme-card-swatch {
  width: 24px;
  height: 24px;
  border-radius: 4px;
}

.theme-card-swatch--bg {
  border: 1px solid var(--color-border-default);
}

.theme-card-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.theme-card-name {
  font-size: 14px;
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
}

.theme-card-check {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--color-accent);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
}

/* ========== SIGN OUT BUTTON ========== */
.signout-button {
  width: 100%;
  padding: 16px;
  background: transparent;
  border: 2px solid var(--color-border-input);
  border-radius: 8px;
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  font-family: var(--font-family);
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.signout-button:hover:not(:disabled) {
  border-color: var(--color-accent);
  color: var(--color-accent);
}

.signout-button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* ========== OVERVIEW PAGE HEADER WITH SETTINGS ========== */
.overview-page-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

.overview-settings-link {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  color: var(--color-text-secondary);
  text-decoration: none;
  border-radius: 8px;
  transition: all var(--transition-fast);
  margin-top: -4px;
}

.overview-settings-link:hover {
  color: var(--color-text-primary);
  background: var(--color-bg-accent);
}

/* ========== FOOD LOG COMPONENTS ========== */

/* --- Progress Card --- */
.progress-card {
  background: var(--color-bg-accent);
  border-radius: 0;
  padding: 20px;
  margin-bottom: 20px;
  /* Extend to full width of container, beyond section padding */
  margin-left: calc(-1 * var(--section-padding-x));
  margin-right: calc(-1 * var(--section-padding-x));
  padding-left: var(--section-padding-x);
  padding-right: var(--section-padding-x);
}

.progress-card__divider {
  height: 1px;
  background: var(--color-border-default);
  margin: 16px 0;
}

.progress-card__macros {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.progress-card__macro-divider {
  width: 1px;
  height: 36px;
  background: var(--color-border-default);
}

/* --- Calorie Progress Bar --- */
.calorie-progress {
  margin-bottom: 0;
}

.calorie-progress__header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  margin-bottom: 10px;
}

.calorie-progress__current {
  display: flex;
  align-items: baseline;
  gap: 4px;
}

.calorie-progress__value {
  font-size: var(--font-size-title);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
  line-height: 1;
}

.calorie-progress__goal {
  font-size: var(--font-size-label);
  font-weight: var(--font-weight-regular);
  color: var(--color-text-tertiary);
}

.calorie-progress__remaining {
  font-size: var(--font-size-small);
  font-weight: var(--font-weight-regular);
  color: var(--color-text-secondary);
}

.calorie-progress__remaining--complete {
  color: var(--color-success);
}

.calorie-progress__track {
  height: 8px;
  background: var(--color-progress-track);
  border-radius: 0;
  overflow: hidden;
}

.calorie-progress__fill {
  height: 100%;
  background: linear-gradient(90deg, var(--color-accent) 0%, var(--color-progress-fill) 100%);
  border-radius: 0;
  transition: width 0.3s ease;
}

/* --- Macro Progress Item --- */
.macro-progress-item {
  flex: 1;
  text-align: center;
}

.macro-progress-item__values {
  font-size: 16px;
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
}

.macro-progress-item__current {
  font-weight: var(--font-weight-bold);
}

.macro-progress-item__goal {
  font-size: var(--font-size-small);
  color: var(--color-text-tertiary);
}

.macro-progress-item__label {
  display: block;
  font-size: var(--font-size-small);
  font-weight: var(--font-weight-regular);
  color: var(--color-text-tertiary);
  margin-top: 4px;
}

/* --- Food Log Row --- */
.food-log-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 0;
  border-bottom: 1px solid var(--color-border-default);
}

.food-log-row:last-child {
  border-bottom: none;
}

.food-log-row__info {
  flex: 1;
  min-width: 0;
}

.food-log-row__header {
  margin-bottom: 4px;
}

.food-log-row__name {
  font-size: 14px;
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.food-log-row__details {
  font-size: var(--font-size-small);
  color: var(--color-text-tertiary);
}

.food-log-row__actions {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-shrink: 0;
  margin-left: 12px;
}

.food-log-row__macros {
  font-size: var(--font-size-small);
  color: var(--color-text-secondary);
  white-space: nowrap;
}

.food-log-row__delete {
  background: none;
  border: none;
  padding: 4px;
  cursor: pointer;
  opacity: 0.4;
  color: var(--color-text-tertiary);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: opacity var(--transition-fast);
}

.food-log-row__delete:hover {
  opacity: 0.8;
}

/* --- Food Log List --- */
.food-log-list {
  margin-bottom: 16px;
}

/* --- Collapsible Food Entries --- */
.food-entries-collapsible {
  margin: 16px -24px 16px -24px;
  background: var(--color-bg-surface);
  border-top: 1px solid var(--color-border-default);
  border-bottom: 1px solid var(--color-border-default);
}

.food-entries-collapsible__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  padding: 14px 24px;
  background: var(--color-bg-surface);
  border: none;
  cursor: pointer;
  transition: background var(--transition-fast);
}

.food-entries-collapsible__header:hover {
  background: var(--color-bg-primary);
}

.food-entries-collapsible__title {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
}

.food-entries-collapsible__icon {
  color: var(--color-text-tertiary);
  display: flex;
  align-items: center;
}

.food-entries-collapsible .food-log-list {
  margin: 0;
  padding: 0 24px 12px;
  background: var(--color-bg-surface);
}

/* --- Add Food Button --- */
.add-food-button {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  width: 100%;
  padding: 16px;
  background: transparent;
  border: 2px solid var(--color-border-input);
  border-radius: 8px;
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.add-food-button:hover {
  border-color: var(--color-accent);
  color: var(--color-accent);
}

/* ========== FOOD SEARCH PAGE ========== */

.food-search-page {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background: var(--color-bg-surface);
}

.food-search-page__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 24px;
  padding-top: calc(env(safe-area-inset-top) + 16px);
  background: var(--color-bg-surface);
}

.food-search-page__back,
.food-search-page__scan {
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  color: var(--color-text-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
}

.food-search-page__title {
  font-size: var(--font-size-large);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}

.food-search-page__search {
  padding: 0 24px 16px;
  background: var(--color-bg-surface);
}

.food-search-page__content {
  flex: 1;
  background: var(--color-bg-primary);
  padding: 0 24px;
  overflow-y: auto;
}

.food-search-page__section-title {
  font-size: var(--font-size-caption);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-tertiary);
  letter-spacing: 0.5px;
  text-transform: uppercase;
  margin: 20px 0 12px;
}

.food-search-page__list {
  background: var(--color-bg-surface);
  border-radius: 12px;
  overflow: hidden;
}

.food-search-page__loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  padding: 40px;
  color: var(--color-text-secondary);
}

.food-search-page__spinner {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.food-search-page__empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 24px;
  text-align: center;
}

.food-search-page__empty-title {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  margin-bottom: 8px;
}

.food-search-page__empty-message {
  font-size: var(--font-size-small);
  color: var(--color-text-tertiary);
}

/* --- Food Result Row --- */
.food-result-row {
  display: block;
  width: 100%;
  padding: 12px 16px;
  background: transparent;
  border: none;
  border-bottom: 1px solid var(--color-border-default);
  cursor: pointer;
  text-align: left;
  transition: background var(--transition-fast);
}

.food-result-row:last-child {
  border-bottom: none;
}

.food-result-row:hover {
  background: var(--color-bg-accent);
}

.food-result-row__content {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.food-result-row__header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 8px;
}

.food-result-row__name {
  font-size: 14px;
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  line-height: 1.3;
  /* Allow wrapping for long names */
  word-break: break-word;
}

.food-result-row__chevron {
  color: var(--color-text-tertiary);
  flex-shrink: 0;
  margin-top: 1px;
}

.food-result-row__details {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0;
  font-size: 12px;
  color: var(--color-text-tertiary);
  line-height: 1.4;
}

.food-result-row__brand,
.food-result-row__serving,
.food-result-row__calories,
.food-result-row__macros {
  white-space: nowrap;
}

.food-result-row__separator {
  margin: 0 5px;
  color: var(--color-text-tertiary);
}

.food-result-row__calories {
  color: var(--color-text-tertiary);
}

.food-result-row__macros {
  color: var(--color-text-tertiary);
}

/* ========== SEARCH BAR ========== */

.search-bar {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  background: var(--color-bg-input);
  border: 2px solid var(--color-border-input);
  border-radius: 8px;
}

.search-bar__icon {
  color: var(--color-text-tertiary);
  flex-shrink: 0;
}

.search-bar__input {
  flex: 1;
  border: none;
  background: transparent;
  font-size: 16px;
  font-weight: var(--font-weight-regular);
  font-family: var(--font-family);
  color: var(--color-text-primary);
  outline: none;
}

.search-bar__input::placeholder {
  color: var(--color-text-tertiary);
}

.search-bar__clear {
  background: none;
  border: none;
  padding: 4px;
  cursor: pointer;
  color: var(--color-text-tertiary);
  display: flex;
  align-items: center;
  justify-content: center;
}

.search-bar__add {
  background: none;
  border: none;
  padding: 4px;
  margin-left: 4px;
  cursor: pointer;
  color: var(--color-text-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.search-bar__add:active {
  color: var(--color-text-primary);
}

/* ========== FOOD DETAIL PAGE ========== */

.food-detail-page {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background: var(--color-bg-surface);
}

.food-detail-page__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 24px;
  padding-top: calc(env(safe-area-inset-top) + 16px);
  background: var(--color-bg-surface);
}

.food-detail-page__back {
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  color: var(--color-text-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
}

.food-detail-page__title {
  font-size: var(--font-size-large);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}

.food-detail-page__content {
  flex: 1;
  background: var(--color-bg-primary);
  padding: 0 24px 24px;
  overflow-y: auto;
}

.food-detail-page__loading {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 40px;
  color: var(--color-text-secondary);
}

.food-detail-page__section {
  padding: 20px 0;
  border-bottom: 1px solid var(--color-border-default);
}

.food-detail-page__section:last-child {
  border-bottom: none;
}

.food-detail-page__food-name {
  font-size: var(--font-size-large);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin-bottom: 4px;
}

.food-detail-page__food-brand {
  font-size: var(--font-size-small);
  color: var(--color-text-tertiary);
}

.food-detail-page__section-title {
  font-size: var(--font-size-caption);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-tertiary);
  letter-spacing: 0.5px;
  text-transform: uppercase;
  margin-bottom: 16px;
}

.food-detail-page__unit-hint {
  font-size: var(--font-size-small);
  color: var(--color-text-tertiary);
  text-align: center;
  margin-top: 12px;
}

.food-detail-page__calories-card {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: var(--color-bg-accent);
  border-radius: 12px;
  padding: 16px 20px;
  margin-bottom: 16px;
}

.food-detail-page__calories-label {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
}

.food-detail-page__calories-value {
  font-size: var(--font-size-title);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
}

.food-detail-page__macros {
  background: var(--color-bg-surface);
  border-radius: 12px;
  overflow: hidden;
}

.food-detail-page__macro-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 16px;
  border-bottom: 1px solid var(--color-border-default);
}

.food-detail-page__macro-row:last-child {
  border-bottom: none;
}

.food-detail-page__macro-label {
  font-size: var(--font-size-body);
  color: var(--color-text-primary);
}

.food-detail-page__macro-value {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
}

.food-detail-page__footer {
  padding: 16px 24px 32px;
  background: var(--color-bg-surface);
}

.food-detail-page__add-button {
  width: 100%;
  padding: 16px;
  background: var(--color-button-primary);
  border: none;
  border-radius: 12px;
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-semibold);
  font-family: var(--font-family);
  color: var(--color-button-text);
  cursor: pointer;
  transition: opacity var(--transition-fast);
}

.food-detail-page__add-button:hover {
  opacity: 0.9;
}

.food-detail-page__add-button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* ========== ADD FOOD PAGE (AI-powered) ========== */

.add-food-page {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background: var(--color-bg-surface);
}

.add-food-page__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 24px;
  padding-top: calc(env(safe-area-inset-top) + 16px);
  background: var(--color-bg-surface);
}

.add-food-page__back {
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  color: var(--color-text-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
}

.add-food-page__title {
  font-size: var(--font-size-large);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}

.add-food-page__spacer {
  width: 44px;
}

.add-food-page__input-section {
  padding: 0 24px 16px;
  background: var(--color-bg-surface);
}

.add-food-page__input-wrapper {
  position: relative;
  margin-bottom: 12px;
}

.add-food-page__input-icon {
  position: absolute;
  top: 14px;
  left: 14px;
  color: var(--color-text-tertiary);
}

.add-food-page__input {
  width: 100%;
  padding: 14px 14px 14px 44px;
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-input);
  border-radius: 12px;
  font-size: var(--font-size-body);
  font-family: var(--font-family);
  color: var(--color-text-primary);
  resize: none;
  transition: border-color var(--transition-fast);
}

.add-food-page__input::placeholder {
  color: var(--color-text-tertiary);
}

.add-food-page__input:focus {
  outline: none;
  border-color: var(--color-accent);
}

.add-food-page__analyze-btn {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 14px;
  background: var(--color-button-primary);
  border: none;
  border-radius: 12px;
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-semibold);
  font-family: var(--font-family);
  color: var(--color-button-text);
  cursor: pointer;
  transition: opacity var(--transition-fast);
}

.add-food-page__analyze-btn:hover {
  opacity: 0.9;
}

.add-food-page__analyze-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.add-food-page__spinner {
  animation: spin 1s linear infinite;
}

.add-food-page__content {
  flex: 1;
  background: var(--color-bg-primary);
  padding: 0 24px;
  overflow-y: auto;
}

.add-food-page__loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  padding: 60px 24px;
  color: var(--color-text-secondary);
}

.add-food-page__error {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 40px 24px;
  color: var(--color-error);
  text-align: center;
}

.add-food-page__error-title {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
}

.add-food-page__error-suggestion {
  font-size: var(--font-size-small);
  color: var(--color-text-tertiary);
}

.add-food-page__confidence {
  display: inline-block;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: var(--font-size-caption);
  font-weight: var(--font-weight-medium);
  margin: 16px 0 8px;
}

.add-food-page__confidence--high {
  background: rgba(76, 175, 80, 0.15);
  color: #4CAF50;
}

.add-food-page__confidence--medium {
  background: rgba(255, 193, 7, 0.15);
  color: #FFC107;
}

.add-food-page__confidence--low {
  background: rgba(244, 67, 54, 0.15);
  color: #F44336;
}

.add-food-page__notes {
  font-size: var(--font-size-small);
  color: var(--color-text-tertiary);
  font-style: italic;
  margin-bottom: 16px;
  line-height: 1.5;
}

.add-food-page__results {
  margin-top: 8px;
}

.add-food-page__section-title {
  font-size: var(--font-size-caption);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-tertiary);
  letter-spacing: 0.5px;
  text-transform: uppercase;
  margin-bottom: 12px;
}

.add-food-page__food-card {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px;
  background: var(--color-bg-surface);
  border-radius: 12px;
  margin-bottom: 10px;
  border: 2px solid transparent;
  transition: border-color var(--transition-fast);
}

.add-food-page__food-card.selected {
  border-color: var(--color-accent);
}

.add-food-page__checkbox {
  width: 24px;
  height: 24px;
  min-width: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-bg-primary);
  border: 2px solid var(--color-border-input);
  border-radius: 6px;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.add-food-page__food-card.selected .add-food-page__checkbox {
  background: var(--color-accent);
  border-color: var(--color-accent);
  color: white;
}

.add-food-page__food-info {
  flex: 1;
  min-width: 0;
}

.add-food-page__food-name {
  display: block;
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-bottom: 4px;
}

.add-food-page__food-amount {
  display: flex;
  align-items: center;
  gap: 4px;
}

.add-food-page__amount-input {
  width: 60px;
  padding: 4px 8px;
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-input);
  border-radius: 6px;
  font-size: var(--font-size-small);
  font-family: var(--font-family);
  color: var(--color-text-primary);
  text-align: center;
}

.add-food-page__amount-input:focus {
  outline: none;
  border-color: var(--color-accent);
}

.add-food-page__unit {
  font-size: var(--font-size-small);
  color: var(--color-text-tertiary);
}

.add-food-page__food-nutrition {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 2px;
}

.add-food-page__calories {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}

.add-food-page__macros {
  font-size: var(--font-size-caption);
  color: var(--color-text-tertiary);
}

.add-food-page__remove {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  cursor: pointer;
  color: var(--color-text-tertiary);
  border-radius: 6px;
  transition: all var(--transition-fast);
}

.add-food-page__remove:hover {
  background: rgba(244, 67, 54, 0.1);
  color: #F44336;
}

.add-food-page__totals {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  background: var(--color-bg-accent);
  border-radius: 12px;
  margin-top: 16px;
}

.add-food-page__totals-label {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
}

.add-food-page__totals-values {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 2px;
}

.add-food-page__totals-calories {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
}

.add-food-page__totals-macros {
  font-size: var(--font-size-small);
  color: var(--color-text-secondary);
}


.add-food-page__footer {
  display: flex;
  gap: 12px;
  padding: 16px 24px 32px;
  background: var(--color-bg-surface);
}

.add-food-page__clear-btn {
  padding: 14px 24px;
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-input);
  border-radius: 12px;
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  font-family: var(--font-family);
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.add-food-page__clear-btn:hover {
  border-color: var(--color-text-tertiary);
}

.add-food-page__add-btn {
  flex: 1;
  padding: 14px;
  background: var(--color-button-primary);
  border: none;
  border-radius: 12px;
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-semibold);
  font-family: var(--font-family);
  color: var(--color-button-text);
  cursor: pointer;
  transition: opacity var(--transition-fast);
}

.add-food-page__add-btn:hover {
  opacity: 0.9;
}

.add-food-page__add-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* ========== SERVING SIZE INPUT ========== */

.serving-input {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
}

.serving-input__button {
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-bg-accent);
  border: none;
  border-radius: 8px;
  cursor: pointer;
  color: var(--color-text-primary);
  transition: background var(--transition-fast);
}

.serving-input__button:hover {
  background: var(--color-accent-soft);
}

.serving-input__field {
  display: flex;
  align-items: center;
  gap: 8px;
  background: var(--color-bg-input);
  border: 2px solid var(--color-border-input);
  border-radius: 8px;
  padding: 8px 12px;
}

.serving-input__number {
  width: 60px;
  border: none;
  background: transparent;
  font-size: 20px;
  font-weight: var(--font-weight-bold);
  font-family: var(--font-family);
  color: var(--color-text-primary);
  text-align: center;
  outline: none;
}

.serving-input__number::-webkit-inner-spin-button,
.serving-input__number::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.serving-input__unit {
  padding: 6px 12px;
  background: var(--color-accent);
  border: none;
  border-radius: 6px;
  font-size: var(--font-size-small);
  font-weight: var(--font-weight-medium);
  font-family: var(--font-family);
  color: #fff;
  cursor: pointer;
  text-transform: lowercase;
}

/* ========== TOAST ========== */

.toast {
  position: fixed;
  bottom: 100px;
  left: 24px;
  right: 24px;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px 20px;
  border-radius: 8px;
  z-index: 400;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  animation: slideUp 0.3s ease;
  cursor: pointer;
}

@keyframes slideUp {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.toast--success {
  background: var(--color-success);
  color: #fff;
}

.toast--error {
  background: #C27878;
  color: #fff;
}

.toast__icon {
  flex-shrink: 0;
}

.toast__message {
  font-size: 14px;
  font-weight: var(--font-weight-medium);
}

/* ========== BARCODE SCANNER PAGE ========== */

.barcode-scanner-page {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background: #000;
}

.barcode-scanner-page__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 24px;
  background: transparent;
}

.barcode-scanner-page__close {
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
}

.barcode-scanner-page__title {
  font-size: var(--font-size-large);
  font-weight: var(--font-weight-semibold);
  color: #fff;
}

.barcode-scanner-page__content {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 24px;
}

.barcode-scanner-page__status {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
  text-align: center;
  color: #fff;
}

.barcode-scanner-page__spinner {
  animation: spin 1s linear infinite;
}

.barcode-scanner-page__icon {
  opacity: 0.6;
}

.barcode-scanner-page__message {
  font-size: var(--font-size-body);
  opacity: 0.8;
  max-width: 280px;
}

.barcode-scanner-page__instruction {
  font-size: var(--font-size-body);
  opacity: 0.8;
  margin-top: 20px;
}

.barcode-scanner-page__error {
  font-size: var(--font-size-body);
  color: #ff6b6b;
  max-width: 280px;
}

.barcode-scanner-page__frame {
  width: 280px;
  height: 180px;
  border: 3px solid rgba(255, 255, 255, 0.5);
  border-radius: 12px;
  position: relative;
}

.barcode-scanner-page__corner {
  position: absolute;
  width: 24px;
  height: 24px;
  border-color: #fff;
  border-style: solid;
  border-width: 0;
}

.barcode-scanner-page__corner--tl {
  top: -3px;
  left: -3px;
  border-top-width: 3px;
  border-left-width: 3px;
  border-top-left-radius: 12px;
}

.barcode-scanner-page__corner--tr {
  top: -3px;
  right: -3px;
  border-top-width: 3px;
  border-right-width: 3px;
  border-top-right-radius: 12px;
}

.barcode-scanner-page__corner--bl {
  bottom: -3px;
  left: -3px;
  border-bottom-width: 3px;
  border-left-width: 3px;
  border-bottom-left-radius: 12px;
}

.barcode-scanner-page__corner--br {
  bottom: -3px;
  right: -3px;
  border-bottom-width: 3px;
  border-right-width: 3px;
  border-bottom-right-radius: 12px;
}

.barcode-scanner-page__button {
  padding: 14px 28px;
  background: rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 8px;
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  font-family: var(--font-family);
  color: #fff;
  cursor: pointer;
  transition: background var(--transition-fast);
}

.barcode-scanner-page__button:hover {
  background: rgba(255, 255, 255, 0.3);
}

.barcode-scanner-page__button--primary {
  background: var(--color-accent);
  border-color: var(--color-accent);
}

.barcode-scanner-page__button--primary:hover {
  background: var(--color-accent);
  opacity: 0.9;
}

.barcode-scanner-page__actions {
  display: flex;
  gap: 12px;
}

/* ========== MANUAL FOOD ENTRY PAGE ========== */

.manual-food-page {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background: var(--color-bg-surface);
}

.manual-food-page__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 24px;
  padding-top: calc(env(safe-area-inset-top) + 16px);
  background: var(--color-bg-surface);
}

.manual-food-page__back {
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  color: var(--color-text-primary);
}

.manual-food-page__title {
  font-size: var(--font-size-large);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}

.manual-food-page__content {
  flex: 1;
  padding: 24px;
  background: var(--color-bg-primary);
}

.manual-food-page__field {
  margin-bottom: 20px;
}

.manual-food-page__field--flex {
  flex: 1;
}

.manual-food-page__label {
  display: block;
  font-size: var(--font-size-small);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-tertiary);
  margin-bottom: 8px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.manual-food-page__input {
  width: 100%;
  padding: 14px 16px;
  background: var(--color-bg-input);
  border: 2px solid var(--color-border-input);
  border-radius: 8px;
  font-size: 16px;
  font-family: var(--font-family);
  color: var(--color-text-primary);
  outline: none;
  transition: border-color var(--transition-fast);
}

.manual-food-page__input:focus {
  border-color: var(--color-accent);
}

.manual-food-page__input::placeholder {
  color: var(--color-text-tertiary);
}

.manual-food-page__row {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
}

.manual-food-page__unit-toggle {
  width: 100%;
  padding: 14px 16px;
  background: var(--color-bg-accent);
  border: 2px solid var(--color-border-input);
  border-radius: 8px;
  font-size: 16px;
  font-weight: var(--font-weight-medium);
  font-family: var(--font-family);
  color: var(--color-text-primary);
  cursor: pointer;
  text-transform: uppercase;
}

.manual-food-page__section-title {
  font-size: var(--font-size-caption);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-tertiary);
  letter-spacing: 0.5px;
  text-transform: uppercase;
  margin-bottom: 16px;
  margin-top: 8px;
}

.manual-food-page__macro-row {
  display: flex;
  gap: 12px;
  margin-bottom: 24px;
}

.manual-food-page__calories {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  background: var(--color-bg-accent);
  border-radius: 0;
  margin-left: -24px;
  margin-right: -24px;
  padding-left: 24px;
  padding-right: 24px;
}

.manual-food-page__calories-label {
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
}

.manual-food-page__calories-value {
  font-size: var(--font-size-title);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
}

.manual-food-page__footer {
  padding: 16px 24px;
  padding-bottom: calc(env(safe-area-inset-bottom) + 16px);
  background: var(--color-bg-surface);
  border-top: 1px solid var(--color-border-default);
}

.manual-food-page__save {
  width: 100%;
  padding: 16px;
  background: var(--color-accent);
  border: none;
  border-radius: 8px;
  font-size: var(--font-size-body);
  font-weight: var(--font-weight-semibold);
  font-family: var(--font-family);
  color: #1a1a1a;
  cursor: pointer;
  transition: opacity var(--transition-fast);
}

.manual-food-page__save:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.manual-food-page__save:not(:disabled):hover {
  opacity: 0.9;
}
